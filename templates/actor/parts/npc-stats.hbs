<section class="scroll-hidden grid grid-8col">
    <!-- Left column -->
    <div class="grid-span-2">
        <fieldset>
            <legend class="section-header">{{localize "PL1E.Skills"}}</legend>
            <ul class="skills">
                <!-- Listing defenses, resistances and skills -->
                {{#each system.skills as |skill key|}}
                    <li class="skill grid grid-6col">
                        <i class="skill-roll grid-span-2 fas fa-dice-d{{skill.dice}} hover-red rollable {{#if (gt skill.diceMod 0)}}color-green{{/if}} {{#if (lt skill.diceMod 0)}}color-red{{/if}}"
                           data-roll="{{skill.number}}d{{skill.dice}}xo{{skill.dice}}cs>=4" data-label="{{skill.label}}">
                            <label class="{{#if (gt skill.numberMod 0)}}color-green{{/if}}
                                {{#if (lt skill.numberMod 0)}}color-red{{/if}}
                                {{#if (eq skill.numberMod 0)}}color-black{{/if}}">{{skill.number}}</label>
                        </i>
                        <label class="skill-label hover-green grid-span-4 align-left" data-id="{{key}}"
                               data-attributes="{{skill.weights.attributes}}" data-characteristics="{{skill.weights.characteristics}}">{{localize skill.label}}</label>
                    </li>
                {{/each}}
            </ul>
        </fieldset>
    </div>
    <!-- Middle column -->
    <div class="scroll-auto grid-span-3">
        <ol class="items-list">
            <li class="item items-header flexrow">
                <div class="item-name">{{localize "PL1E.Traits"}}</div>
            </li>
            {{#each features as |item id|}}
                <li class="item flexrow grid grid-2col" data-item-id="{{item._id}}">
                    <div class="item-name">
                        <div class="item-image">
                            <a class="hover-red rollable" data-roll-type="item">
                                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                            </a>
                        </div>
                        <h4>{{item.name}}</h4>
                    </div>
                    <div class="item-controls">
                        <a class="item-control item-edit" data-item-id='{{item._id}}' data-hover-green='{{localize "PL1E.Edit"}}'><i class="fas fa-eye"></i></a>
                        {{#if (eq item.system.childId undefined)}}
                            <a class="item-control item-delete" data-item-id="{{item._id}}" data-hover-green='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                        {{/if}}
                    </div>
                </li>
            {{/each}}
        </ol>
        <ol class="items-list">
            {{#each abilities as |abilities level|}}
                <li class="item items-header flexrow">
                    <div class="item-name">{{localize "PL1E.AbilitiesLevel"}} {{level}}</div>
                </li>
                {{#each abilities as |item id|}}
                    <li class="item flexrow grid grid-2col" data-item-id="{{item._id}}">
                        <div class="item-name">
                            <div class="item-image">
                                <a class="hover-red rollable" data-roll-type="item">
                                    <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                                </a>
                            </div>
                            <h4>{{item.name}}</h4>
                        </div>
                        <div class="item-controls">
                            {{#if item.system.isMemorized}}
                                <a class="item-control item-toggle ability-toggle" data-hover-green='{{localize "PL1E.Memorize"}}'><i class="fas fa-book"></i></a>
                            {{else}}
                                <a class="item-control item-toggle item-inactive ability-toggle" data-hover-green='{{localize "PL1E.Memorize"}}'><i class="fas fa-book"></i></a>
                            {{/if}}
                            <a class="item-control item-edit" data-item-id='{{item._id}}' data-hover-green='{{localize "PL1E.Edit"}}'><i class="fas fa-eye"></i></a>
                            {{#if (eq item.system.childId undefined)}}
                                <a class="item-control item-delete" data-item-id="{{item._id}}" data-hover-green='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                            {{/if}}
                        </div>
                    </li>
                {{/each}}
            {{/each}}
        </ol>
        <ol class="items-list">
            <li class="item flexrow items-header">
                <div class="item-name">{{localize "PL1E.Weapon"}}</div>
            </li>
            {{#each weapons as |item key|}}
                <li class="item flexrow grid grid-2col" data-item-id="{{item._id}}">
                    <div class="item-name">
                        <div class="item-image">
                            <a class="hover-red rollable" data-roll-type="item">
                                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                            </a>
                        </div>
                        <label>{{item.name}}</label>
                    </div>
                    <div class="item-controls">
                        <a class="item-control item-toggle weapon-toggle" data-main='false' data-hover-green='{{localize "PL1E.EquipSecondary"}}'>
                            <i class="fas fa-hand icon-flipped {{#unless item.system.isEquippedSecondary}}item-inactive{{/unless}}"></i>
                        </a>
                        <a class="item-control item-toggle weapon-toggle" data-main='true' data-hover-green='{{localize "PL1E.EquipMain"}}'>
                            <i class="fas fa-hand {{#unless item.system.isEquippedMain}}item-inactive{{/unless}}"></i>
                        </a>
                        <a class="item-control item-edit" data-item-id='{{item._id}}' data-hover-green='{{localize "PL1E.Edit"}}'><i class="fas fa-eye"></i></a>
                        <a class="item-control item-delete" data-item-id="{{item._id}}" data-hover-green='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                    </div>
                </li>
            {{/each}}
        </ol>
        <ol class="items-list">
            <li class="item flexrow items-header">
                <div class="item-name">{{localize "PL1E.Wearable"}}</div>
            </li>
            {{#each wearables as |item key|}}
                <li class="item flexrow grid grid-2col" data-item-id="{{item._id}}">
                    <div class="item-name">
                        <div class="item-image">
                            <a class="hover-red rollable" data-roll-type="item">
                                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                            </a>
                        </div>
                        <label>{{item.name}}</label>
                    </div>
                    <div class="item-controls">
                        {{#if (eq item.system.attributes.slot.value "clothes")}}
                            <a class="item-control item-toggle wearable-toggle" data-hover-green='Reloadable'>
                                <i class="fas fa-shirt-long-sleeve {{#unless item.system.isEquipped}}item-inactive{{/unless}}"></i>
                            </a>
                        {{else if (eq item.system.attributes.slot.value "armor")}}
                            <a class="item-control item-toggle wearable-toggle" data-hover-green='Reloadable'>
                                <i class="fas fa-helmet-battle {{#unless item.system.isEquipped}}item-inactive{{/unless}}"></i>
                            </a>
                        {{else if (eq item.system.attributes.slot.value "ring")}}
                            <a class="item-control item-toggle wearable-toggle" data-hover-green='Reloadable'>
                                <i class="fas fa-ring {{#unless item.system.isEquipped}}item-inactive{{/unless}}"></i>
                            </a>
                        {{else if (eq item.system.attributes.slot.value "amulet")}}
                            <a class="item-control item-toggle wearable-toggle" data-hover-green='Reloadable'>
                                <i class="fas fa-gem {{#unless item.system.isEquipped}}item-inactive{{/unless}}"></i>
                            </a>
                        {{else}}
                            <a class="item-control item-toggle wearable-toggle" data-hover-green='{{localize "PL1E.Equip"}}'>
                                <i class="fas fa-clothes-hanger {{#unless item.system.isEquipped}}item-inactive{{/unless}}"></i>
                            </a>
                        {{/if}}
                        <a class="item-control item-edit" data-item-id='{{item._id}}' data-hover-green='{{localize "PL1E.Edit"}}'><i class="fas fa-eye"></i></a>
                        <a class="item-control item-delete" data-item-id="{{item._id}}" data-hover-green='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                    </div>
                </li>
            {{/each}}
        </ol>
        <ol class="items-list">
            <li class="item flexrow items-header">
                <div class="item-name">{{localize "PL1E.Consumable"}}</div>
            </li>
            {{#each consumables as |item key|}}
                <li class="item flexrow grid grid-2col" data-item-id="{{item._id}}">
                    <div class="item-name">
                        <div class="item-image">
                            <a class="hover-red rollable" data-roll-type="item">
                                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                            </a>
                        </div>
                        <label>{{item.name}}</label>
                    </div>
                    <div class="item-controls">
                        {{#if (eq item.system.attributes.uses.value item.system.removedUses)}}
                            {{#if item.system.attributes.reloadable.value}}
                                <a class="item-control item-toggle consumable-reload" data-hover-green='{{localize "PL1E.Reload"}}'>
                                    <i class="fas fa-repeat"></i>
                                </a>
                            {{/if}}
                        {{/if}}
                        {{#if (ne item.system.attributes.uses.value item.system.removedUses)}}
                            <a class="item-control item-toggle consumable-toggle" data-tooltip='{{localize "PL1E.Use"}}'>
                                <i class="fas fa-gear"></i>
                            </a>
                        {{/if}}
                        <a class="item-control item-edit" data-item-id='{{item._id}}' data-tooltip='{{localize "PL1E.Edit"}}'><i class="fas fa-eye"></i></a>
                        <a class="item-control item-delete" data-item-id="{{item._id}}" data-tooltip='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                    </div>
                </li>
            {{/each}}
        </ol>
        <ol class="items-list effects-list">
            {{#each effects as |section sid|}}
                <li class="items-header flexrow" data-effect-type="{{section.type}}">
                    <h3 class="item-name effect-name flexrow">{{localize section.label}}</h3>
                    <div class="effect-source">Source</div>
                    <div class="effect-source">Duration</div>
                    <div class="item-controls effect-controls flexrow">
                        <a class="effect-control" data-action="create" title="{{localize 'PL1E.EffectCreate'}}">
                            <i class="fas fa-plus"></i> {{localize "PL1E.Add"}}
                        </a>
                    </div>
                </li>
                <ol class="item-list">
                    {{#each section.effects as |effect|}}
                        <li class="item effect flexrow" data-effect-id="{{effect.id}}">
                            <div class="item-name effect-name flexrow">
                                <img class="item-image" src="{{effect.icon}}"/>
                                <h4>{{effect.label}}</h4>
                            </div>
                            <div class="effect-source">{{effect.sourceName}}</div>
                            <div class="effect-duration">{{effect.duration.label}}</div>
                            <div class="item-controls effect-controls flexrow">
                                <a class="effect-control" data-action="toggle" title="{{localize 'PL1E.EffectToggle'}}">
                                    <i class="fas {{#if effect.disabled}}fa-check{{else}}fa-times{{/if}}"></i>
                                </a>
                                <a class="effect-control" data-action="edit" title="{{localize 'PL1E.EffectEdit'}}">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a class="effect-control" data-action="delete" title="{{localize 'PL1E.EffectDelete'}}">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </li>
                    {{/each}}
                </ol>
            {{/each}}
        </ol>
    </div>
    <!-- Right column -->
    <div class="attributes scroll-auto grid-span-3">
        <fieldset>
            <legend class="section-header">{{localize "PL1E.General"}}</legend>
            <div class="form-group attribute">
                <select name="system.attributes.NPCTemplate">
                    {{selectOptions (config "NPCTemplates") selected=system.attributes.NPCTemplate localize=true}}
                </select>
            </div>
            <div class="form-group attribute">
                <select name="system.attributes.experienceTemplate">
                    {{selectOptions (config "experienceTemplates") selected=system.attributes.experienceTemplate localize=true}}
                </select>
            </div>
            <div class="form-group grid grid-2col attribute">
                <label>{{localize "PL1E.Slots"}}</label>
                <label class="align-right">{{system.attributes.slots}}</label>
            </div>
            <div class="form-group grid grid-2col attribute">
                <label>{{localize "PL1E.Ranks"}}</label>
                <label class="align-right">{{system.attributes.ranks}}</label>
            </div>
        </fieldset>
        <fieldset>
            <legend class="section-header">{{localize "PL1E.Base"}}</legend>
            <div class="form-group attribute">
                <label>{{localize "PL1E.Size"}}</label>
                <label class="align-right">{{localize (configEntry "sizes" system.attributes.size)}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.Speed"}}</label>
                <label class="align-right">{{system.attributes.speed}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.Initiative"}}</label>
                <label class="align-right">{{system.attributes.initiative}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.DodgeBonuses"}}</label>
                <label class="align-right">{{system.attributes.dodgeBonuses}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.ParryBonuses"}}</label>
                <label class="align-right">{{system.attributes.parryBonuses}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.MovementPenalty"}}</label>
                <label class="align-right">{{system.attributes.movementPenalty}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.NightVision"}}</label>
                <label class="align-right">{{system.attributes.nightVision}}</label>
            </div>
        </fieldset>
        <fieldset>
            <legend class="section-header">{{localize "PL1E.Reduction"}}</legend>
            <div class="form-group attribute">
                <label>{{localize "PL1E.SlashingReduction"}}</label>
                <label class="align-right">{{system.attributes.slashingReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.CrushingReduction"}}</label>
                <label class="align-right">{{system.attributes.crushingReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.PiercingReduction"}}</label>
                <label class="align-right">{{system.attributes.piercingReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.FireReduction"}}</label>
                <label class="align-right">{{system.attributes.fireReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.ColdReduction"}}</label>
                <label class="align-right">{{system.attributes.coldReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.AcidReduction"}}</label>
                <label class="align-right">{{system.attributes.acidReduction}}</label>
            </div>
            <div class="form-group attribute">
                <label>{{localize "PL1E.ShockReduction"}}</label>
                <label class="align-right">{{system.attributes.shockReduction}}</label>
            </div>
        </fieldset>
    </div>
</section>