<div class="items-list">
    <div class="items-header">
        <h3 class="header-title">
            {{localize "PL1E.Consumables"}}
            {{#unless favoriteDisplay}}
                <div class="item-filter-list" data-filter="consumables">
                    <div class="item-filter hover-action enabled-action" data-filter="action">{{localize "PL1E.Action"}}</div>
                    <div class="item-filter hover-action enabled-action" data-filter="quickAction">{{localize "PL1E.QuickAction"}}</div>
                    <div class="item-filter hover-action enabled-action" data-filter="outOfCombat">{{localize "PL1E.OutOfCombat"}}</div>
                </div>
            {{/unless}}
        </h3>
    </div>
    <div class="items-column">
        {{#each consumables}}
            {{#if (or (not ../favoriteDisplay) (and system.isFavorite ../favoriteDisplay))}}
                <div class="item" data-item-id="{{_id}}">
                    <div class="item-content">
                        <div class="item-title">
                            <img class="item-edit hover-action" src="{{img}}" title="{{name}}" width="24" height="24"/>
                            <label class="item-tooltip-activate hover-action">
                                {{#if ../system.general.unlimitedItems}}
                                    {{name}}
                                {{else}}
                                    {{units}}x {{name}}
                                {{/if}}
                            </label>
                        </div>
                        <div class="item-icons">
                            {{#unless ../favoriteDisplay}}
                                {{#if (ne system.attributes.actionCost 0)}}
                                    <i class="far fa-clock hover-info" data-tooltip='{{localize "PL1E.ActionCost"}}'>
                                        <label>{{system.attributes.actionCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if (ne system.attributes.reactionCost 0)}}
                                    <i class="far fa-reply-clock hover-info" data-tooltip='{{localize "PL1E.ReactionCost"}}'>
                                        <label>{{system.attributes.reactionCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if (ne system.attributes.quickActionCost 0)}}
                                    <i class="far fa-bell hover-info" data-tooltip='{{localize "PL1E.QuickActionCost"}}'>
                                        <label>{{system.attributes.quickActionCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if (ne system.attributes.healthCost 0)}}
                                    <i class="far fa-heart hover-info" data-tooltip='{{localize "PL1E.HealthCost"}}'>
                                        <label>{{system.attributes.healthCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if (ne system.attributes.staminaCost 0)}}
                                    <i class="far fa-wave-pulse hover-info" data-tooltip="{{localize "PL1E.StaminaCost"}}">
                                        <label>{{system.attributes.staminaCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if (ne system.attributes.manaCost 0)}}
                                    <i class="far fa-sparkles hover-info" data-tooltip='{{localize "PL1E.ManaCost"}}'>
                                        <label>{{system.attributes.manaCost}}</label>
                                    </i>
                                {{/if}}
                                {{#if system.attributes.isMajorAction}}
                                    <i class="far fa-star hover-info" data-tooltip='{{localize "PL1E.IsMajorAction"}}'></i>
                                {{/if}}
                                {{#if system.attributes.isDangerous}}
                                    <i class="far fa-skull-crossbones hover-info" data-tooltip='{{localize "PL1E.IsDangerous"}}'></i>
                                {{/if}}
                                {{#if (gt system.attributes.uses 0)}}
                                    {{#if (eq system.removedUses 0)}}
                                        <i class="far fa-battery-full hover-info" data-tooltip='{{localize "PL1E.Uses"}}'>
                                            <label>{{minus system.attributes.uses system.removedUses}}</label>
                                        </i>
                                    {{else if (eq system.removedUses system.attributes.uses)}}
                                        <i class="far fa-battery-empty hover-info" data-tooltip='{{localize "PL1E.Uses"}}'>
                                            <label>{{minus system.attributes.uses system.removedUses}}</label>
                                        </i>
                                    {{else}}
                                        <i class="far fa-battery-half hover-info" data-tooltip='{{localize "PL1E.Uses"}}'>
                                            <label>{{minus system.attributes.uses system.removedUses}}</label>
                                        </i>
                                    {{/if}}
                                    {{#if system.attributes.isReloadable}}
                                        <i class="far fa-repeat hover-info" data-tooltip='{{localize "PL1E.Reloadable"}}'></i>
                                    {{/if}}
                                {{/if}}
                                {{#if (eq @root.actor.type "character")}}
                                    {{#if (gt system.attributes.goldPrice 0)}}
                                        <i class="far fa-coins color-gold hover-info" data-tooltip='{{localize "PL1E.Gold"}}'>
                                            <label>{{system.attributes.goldPrice}}</label>
                                        </i>
                                    {{/if}}
                                    {{#if (gt system.attributes.silverPrice 0)}}
                                        <i class="far fa-coins color-silver hover-info" data-tooltip='{{localize "PL1E.Silver"}}'>
                                            <label>{{system.attributes.silverPrice}}</label>
                                        </i>
                                    {{/if}}
                                    {{#if (gt system.attributes.copperPrice 0)}}
                                        <i class="far fa-coins color-copper hover-info" data-tooltip='{{localize "PL1E.Copper"}}'>
                                            <label>{{system.attributes.copperPrice}}</label>
                                        </i>
                                    {{/if}}
                                {{else if (eq @root.actor.type "merchant")}}
                                    {{#with (lookup ../system.merchantPrices _id)}}
                                        {{#if (gt gold 0)}}
                                            <i class="far fa-coins color-gold hover-info" data-tooltip='{{localize "PL1E.Gold"}}'>
                                                <label>{{gold}}</label>
                                            </i>
                                        {{/if}}
                                        {{#if (gt silver 0)}}
                                            <i class="far fa-coins color-silver hover-info" data-tooltip='{{localize "PL1E.Silver"}}'>
                                                <label>{{silver}}</label>
                                            </i>
                                        {{/if}}
                                        {{#if (gt copper 0)}}
                                            <i class="far fa-coins color-copper hover-info" data-tooltip='{{localize "PL1E.Copper"}}'>
                                                <label>{{copper}}</label>
                                            </i>
                                        {{/if}}
                                    {{/with}}
                                {{/if}}
                            {{/unless}}
                        </div>
                        <div class="item-controls">
                            {{#if (or (eq @root.actor.type "character") (eq @root.actor.type "npc"))}}
                                {{#if (gt (length warnings) 0)}}
                                    <a data-tooltip='{{join warnings ', ' true}}'>
                                        <i class="far fa-exclamation-triangle hover-info color-warning"></i>
                                    </a>
                                {{/if}}
                                {{#if (and (ne system.removedUses 0) system.attributes.isReloadable)}}
                                    <a class="item-reload" data-tooltip='{{localize "PL1E.Reload"}}'>
                                        <i class="fas fa-repeat"></i>
                                    </a>
                                {{/if}}
                                {{#if isEnabled}}
                                    <a class="item-use" data-tooltip='{{localize "PL1E.Use"}}'><i class="fas fa-dice-d20"></i></a>
                                {{/if}}
                            {{/if}}
                            <a class="item-favorite" data-tooltip='{{localize "PL1E.Favorite"}}'>
                                <i class="fas fa-bookmark {{#unless system.isFavorite}}color-grey{{/unless}}"></i>
                            </a>
                            {{#if @root.actor.isOwner}}
                                {{#if flags.pl1e.childId}}
                                    <a class="item-link" data-tooltip='{{localize "PL1E.Link"}}'><i class="fas fa-link"></i></a>
                                {{else}}
                                    <a class="item-remove" data-tooltip='{{localize "PL1E.Delete"}}'><i class="fas fa-trash"></i></a>
                                {{/if}}
                            {{/if}}
                        </div>
                    </div>
                    <div class="item-tooltip">{{{enriched}}}</div>
                </div>
            {{/if}}
        {{/each}}
    </div>
</div>