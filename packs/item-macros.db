{"name":"Spell Activation","type":"script","scope":"global","author":"GR03rr8HdmGJJJsz","img":"icons/svg/dice-target.svg","command":"let tokenId = args[0].tokenId;\nlet mastery = args[0].item.system.attributes.mastery;\nlet active = args[1].active\n\nconst masteryToFile = {\n    \"arcana\": \"jb2a.magic_signs.circle.02.abjuration.complete.blue\",\n    \"aramancia\": \"jb2a.magic_signs.circle.02.evocation.complete.red\",\n    \"biomancia\": \"jb2a.magic_signs.circle.02.transmutation.complete.yellow\",\n    \"diastamancia\": \"jb2a.magic_signs.circle.02.divination.complete.blue\",\n    \"goetia\": \"jb2a.magic_signs.circle.02.enchantment.complete.pink\",\n    \"myalomancia\": \"jb2a.magic_signs.circle.02.illusion.complete.purple\",\n    \"necromancia\": \"jb2a.magic_signs.circle.02.necromancy.complete.green\",\n    \"theurgy\": \"jb2a.magic_signs.circle.02.conjuration.complete.yellow\"\n};\n\nconst file = masteryToFile[mastery];\nif (file === undefined) return;\n\nif (active) {\n    new Sequence()\n    .effect()\n        .file(masteryToFile[mastery])\n        .attachTo(tokenId)\n        .belowTokens()\n        .scaleToObject(2)\n        .fadeIn(1500, {ease: \"easeOutCubic\", delay: 500})\n        .fadeOut(1500)\n        .rotateIn(90, 2500, {ease: \"easeInOutCubic\"})\n        .rotateOut(350, 1500, {ease: \"easeInCubic\"})\n        .scaleIn(2, 2500, {ease: \"easeInOutCubic\"})\n        .scaleOut(0, 1500, {ease: \"easeInCubic\"})\n        .persist()\n        .name(`SpellActivation-${tokenId}`)\n    .play()\n}\nelse {\n    await Sequencer.EffectManager.endEffects({ name: `SpellActivation-${tokenId}` })\n}","ownership":{"default":0,"GR03rr8HdmGJJJsz":3},"flags":{"advanced-macros":{"runAsGM":true,"runForSpecificUser":""},"core":{"sourceId":"Macro.WyXBno1eq7O10P7x"}},"_stats":{"systemId":"pl1e","systemVersion":"1.2.0","coreVersion":"10.291","createdTime":1683896228546,"modifiedTime":1684441995949,"lastModifiedBy":"P6Z2c3qOa4LQLGLN"},"folder":null,"sort":0,"_id":"Nnf8YJ2q06R9JduE"}
{"name":"Weapon Range Launch","type":"script","scope":"global","author":"P6Z2c3qOa4LQLGLN","img":"icons/svg/dice-target.svg","command":"let tokenId = args[0].tokenId;\nlet mastery = args[0].item.system.attributes.mastery;\nlet targetId = args[1].tokenId;\nlet missed = args[1].result === 0;\n\nconst masteryToFile = {\n    \"crossbows\": \"jb2a.bolt.physical.orange\",\n    \"bows\": \"jb2a.arrow.physical.blue\",\n    \"poleArms\": \"jb2a.dagger.throw.01\",\n    \"shortAxes\": \"jb2a.dagger.throw.01\",\n    \"shortBlades\": \"jb2a.dagger.throw.01\"\n};\n\nconst file = masteryToFile[mastery];\nif (file === undefined) {\n    file = \"jb2a.melee_generic\";\n}\n\nlet sequence = new Sequence()\n    .effect()\n        .file(file)\n        .atLocation(tokenId)\n        .stretchTo(targetId)\n        .randomizeMirrorY()\n        .missed(missed)\n    .play()","ownership":{"default":0,"P6Z2c3qOa4LQLGLN":3},"flags":{"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.hiMEI7aavjeyH67u"}},"_stats":{"systemId":"pl1e","systemVersion":"1.2.0","coreVersion":"10.291","createdTime":1684438976540,"modifiedTime":1684442735803,"lastModifiedBy":"P6Z2c3qOa4LQLGLN"},"folder":null,"sort":0,"_id":"bE6g7eNRgOFRyjJr"}
{"name":"Weapon Melee Launch","type":"script","scope":"global","author":"P6Z2c3qOa4LQLGLN","img":"icons/svg/dice-target.svg","command":"let tokenId = args[0].tokenId;\nlet mastery = args[0].item.system.attributes.mastery;\nlet targetId = args[1].tokenId;\nlet missed = args[1].result === 0;\n\nconst masteryToFile = {\n    \"poleArms\": \"jb2a.spear.melee.01\",\n    \"shortAxes\": \"jb2a.melee_attack.02.handaxe.01\",\n    \"longAxes\": \"jb2a.melee_attack.03.trail.greataxe.01\",\n    \"shortBlades\": \"jb2a.melee_attack.01.shortsword.01\",\n    \"mediumBlades\": \"jb2a.melee_attack.01.shortsword.01\",\n    \"longBlades\": \"jb2a.melee_attack.03.trail.greatsword.01\",\n    \"shortHammers\": \"jb2a.melee_attack.02.hammer.02\",\n    \"longHammers\": \"jb2a.melee_attack.03.trail.maul.01\"\n};\n\nconsole.log(mastery);\nlet file = masteryToFile[mastery];\nconsole.log(file);\nif (file === undefined) {\n    file = \"jb2a.melee_generic\";\n}\n\nlet sequence = new Sequence()\n    .effect()\n        .file(file)\n        .atLocation(tokenId)\n        .stretchTo(targetId)\n        .randomizeMirrorY()\n        .missed(missed)\n    .play()","ownership":{"default":0,"P6Z2c3qOa4LQLGLN":3},"flags":{"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.EgIM9bFrm3I9dLcd"}},"_stats":{"systemId":"pl1e","systemVersion":"1.2.0","coreVersion":"10.291","createdTime":1684436978216,"modifiedTime":1684442274212,"lastModifiedBy":"P6Z2c3qOa4LQLGLN"},"folder":null,"sort":0,"_id":"bMnmKFV3jNv3SiLM"}
{"name":"Magic Missile","type":"script","scope":"global","author":"GR03rr8HdmGJJJsz","img":"icons/svg/dice-target.svg","command":"let tokenId = args[0].tokenId;\nlet targetId = args[1].tokenId;\n\nnew Sequence()\n    .effect()\n        .file(\"jb2a.magic_missile\")\n        .atLocation(tokenId)\n        .stretchTo(targetId)\n        .randomizeMirrorY()\n        .missed(false)\n    .play()","ownership":{"default":0,"GR03rr8HdmGJJJsz":3},"flags":{"advanced-macros":{"runAsGM":true,"runForSpecificUser":""},"core":{"sourceId":"Macro.IDQO2gr373FCcfVg"}},"_stats":{"systemId":"pl1e","systemVersion":"1.2.0","coreVersion":"10.291","createdTime":1683842264920,"modifiedTime":1683921635400,"lastModifiedBy":"GR03rr8HdmGJJJsz"},"folder":null,"sort":0,"_id":"mI3RBDjyJRjhaNbP"}
{"name":"Log Args","type":"script","scope":"global","author":"P6Z2c3qOa4LQLGLN","img":"icons/vtt-512.png","command":"// Copy the id of this macro into macro fields of the item to debug the output args\n\nconsole.log(args);","ownership":{"default":0,"GR03rr8HdmGJJJsz":3,"P6Z2c3qOa4LQLGLN":3},"flags":{"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.3LYkdOIeTqQWK8iF"}},"_stats":{"systemId":"pl1e","systemVersion":"1.2.0","coreVersion":"10.291","createdTime":1683891596681,"modifiedTime":1684442115585,"lastModifiedBy":"P6Z2c3qOa4LQLGLN"},"folder":null,"sort":0,"_id":"pPbbGIyQaWjkP75s"}
